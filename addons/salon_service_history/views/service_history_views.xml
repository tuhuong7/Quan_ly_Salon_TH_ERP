<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <record id="view_salon_service_history_tree" model="ir.ui.view">
    <field name="name">salon.service.history.tree</field>
    <field name="model">salon.service.history</field>
    <field name="arch" type="xml">
        <list string="Lịch sử dịch vụ" default_order="date desc">
          <field name="date" string="Ngày thực hiện" widget="datetime"/>
          <field name="customer_id" string="Khách hàng"/>
          <field name="service_id" string="Dịch vụ"/>
          <field name="staff_id" string="Nhân viên"/>
          <field name="amount" string="Chi phí" widget="monetary" options="{'decimal_places': 0}" sum="Tổng"/>
          <field name="currency_id" invisible="1" column_invisible="1"/>
          <field name="invoice_name" string="Mã hóa đơn" optional="show"/>
          <field name="notes" string="Ghi chú"/>
        </list>
    </field>
  </record>

  <record id="view_salon_service_history_search" model="ir.ui.view">
    <field name="name">salon.service.history.search</field>
    <field name="model">salon.service.history</field>
    <field name="arch" type="xml">
      <search string="Tìm kiếm lịch sử dịch vụ">
        <field name="customer_id" string="Khách hàng"/>
        <field name="service_id" string="Dịch vụ"/>
        <field name="staff_id" string="Nhân viên"/>
        <field name="date" string="Ngày thực hiện"/>
        <separator/>
        <filter string="Nhóm theo Ngày" name="group_by_date" context="{'group_by': 'date:day'}"/>
        <filter string="Nhóm theo Tháng" name="group_by_month" context="{'group_by': 'date:month'}"/>
        <filter string="Nhóm theo Năm" name="group_by_year" context="{'group_by': 'date:year'}"/>
        <filter string="Nhóm theo Khách hàng" name="group_by_customer" context="{'group_by': 'customer_id'}"/>
        <filter string="Nhóm theo Dịch vụ" name="group_by_service" context="{'group_by': 'service_id'}"/>
        <filter string="Nhóm theo Nhân viên" name="group_by_staff" context="{'group_by': 'staff_id'}"/>
      </search>
    </field>
  </record>

  <record id="view_salon_service_history_graph" model="ir.ui.view">
    <field name="name">salon.service.history.graph</field>
    <field name="model">salon.service.history</field>
    <field name="arch" type="xml">
      <graph string="Thống kê lịch sử dịch vụ" type="bar">
        <field name="date" type="row" interval="month"/>
        <field name="amount" type="measure"/>
      </graph>
    </field>
  </record>

  <record id="view_salon_service_history_pivot" model="ir.ui.view">
    <field name="name">salon.service.history.pivot</field>
    <field name="model">salon.service.history</field>
    <field name="arch" type="xml">
      <pivot string="Thống kê lịch sử dịch vụ">
        <field name="date" type="row" interval="month"/>
        <field name="customer_id" type="col"/>
        <field name="amount" type="measure"/>
      </pivot>
    </field>
  </record>

  <record id="view_salon_service_history_form" model="ir.ui.view">
    <field name="name">salon.service.history.form</field>
    <field name="model">salon.service.history</field>
    <field name="arch" type="xml">
      <form string="Lịch sử dịch vụ">
        <sheet>
          <group>
            <group>
              <field name="customer_id" readonly="1"/>
              <field name="date"/>
              <field name="service_id"/>
              <field name="staff_id"/>
            </group>
            <group>
              <field name="invoice_name" readonly="1"/>
              <button name="action_open_invoice" string="Mở hóa đơn" type="object" 
                      class="btn-secondary" invisible="not invoice_name"
                      icon="fa-file-invoice"/>
              <field name="amount" widget="monetary" options="{'decimal_places': 0}"/>
              <field name="currency_id" invisible="1"/>
              <field name="notes"/>
            </group>
          </group>

        </sheet>
      </form>
    </field>
  </record>
</odoo>

